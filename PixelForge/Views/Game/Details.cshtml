@model PixelForge.Models.Game

@{
    ViewData["Title"] = "Details";
}

<h2>@Model.Title</h2>

<div>
    <strong>Price:</strong> @Model.Price.ToString("N2")$
</div>

<div>
    <strong>Publisher:</strong> @Model.Publisher.FirstName @Model.Publisher.SecondName
</div>

<div><strong>Owned by:</strong> @ViewBag.OwnersCount user(s)</div>

<h4>Average Rating: @(Model.Reviews.Any() ? Model.Reviews.Average(r => r.Rating).ToString("0.0") : "No ratings") / 5</h4>

@if (Model.Reviews.Any())
{
    double average = Model.Reviews.Average(r => r.Rating);
    <div>
        @for (int i = 1; i <= 5; i++)
        {
            <span>@(i <= Math.Round(average) ? "★" : "☆")</span>
        }
        <span> (@average.ToString("0.0") / 5)</span>
    </div>
    @foreach (var review in Model.Reviews)
    {
        <li>
            <strong>@review.User.FirstName @review.User.SecondName</strong> rated @review.Rating/5
            <p>@review.Comment</p>
        </li>
    }
}
else
{
    <p>No reviews yet.</p>
}

<a asp-action="Store">Back to Store</a>
